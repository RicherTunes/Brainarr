<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
    <IsPackable>false</IsPackable>
    <Nullable>enable</Nullable>
    <IsTestProject>false</IsTestProject>
    <!-- Ensure all transitive dependencies are copied for downstream test projects (Linux testhost) -->
    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="../../Brainarr.Plugin/Brainarr.Plugin.csproj" />
  </ItemGroup>
  <!-- Resolve LidarrPath from env and common extraction locations -->
  <PropertyGroup>
    <LidarrPath Condition="'$(LidarrPath)' == ''">$(LIDARR_PATH)</LidarrPath>
    <LidarrPath Condition="'$(LidarrPath)' == '' AND Exists('..\\..\\ext\\Lidarr-docker\\_output\\net6.0')">..\\..\\ext\\Lidarr-docker\\_output\\net6.0</LidarrPath>
    <LidarrPath Condition="'$(LidarrPath)' == '' AND Exists('..\\..\\ext\\Lidarr\\_output\\net6.0')">..\\..\\ext\\Lidarr\\_output\\net6.0</LidarrPath>
  </PropertyGroup>
  <ItemGroup>
    <!-- Compile-time reference to Lidarr Http abstractions used by TestKit -->
    <Reference Include="Lidarr.Http">
      <HintPath>$(LidarrPath)/Lidarr.Http.dll</HintPath>
      <Private>true</Private>
    </Reference>
    <!-- NzbDrone.Common.Http lives in Lidarr.Common.dll; needed for HttpRequest/HttpResponse -->
    <Reference Include="Lidarr.Common">
      <HintPath>$(LidarrPath)/Lidarr.Common.dll</HintPath>
      <Private>true</Private>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="NLog" />
  </ItemGroup>
</Project>
