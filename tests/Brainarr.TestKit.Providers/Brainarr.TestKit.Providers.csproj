<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFrameworks>net6.0;net8.0</TargetFrameworks>
    <IsPackable>false</IsPackable>
    <Nullable>enable</Nullable>
    <IsTestProject>false</IsTestProject>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="../../Brainarr.Plugin/Brainarr.Plugin.csproj" />
  </ItemGroup>
  <!-- Resolve LidarrPath from env and common extraction locations -->
  <PropertyGroup>
    <LidarrPath Condition="'$(LidarrPath)' == ''">$(LIDARR_PATH)</LidarrPath>
    <LidarrPath Condition="'$(LidarrPath)' == '' AND Exists('../../ext/Lidarr-docker/_output/$(TargetFramework)')">../../ext/Lidarr-docker/_output/$(TargetFramework)</LidarrPath>
    <LidarrPath Condition="'$(LidarrPath)' == '' AND Exists('../../ext/Lidarr/_output/$(TargetFramework)')">../../ext/Lidarr/_output/$(TargetFramework)</LidarrPath>
  </PropertyGroup>
  <ItemGroup>
    <!-- Compile-time reference to Lidarr Http abstractions used by TestKit -->
    <Reference Include="Lidarr.Http">
      <HintPath>$(LidarrPath)/Lidarr.Http.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <!-- NzbDrone.Common.Http lives in Lidarr.Common.dll; needed for HttpRequest/HttpResponse -->
    <Reference Include="Lidarr.Common">
      <HintPath>$(LidarrPath)/Lidarr.Common.dll</HintPath>
      <Private>false</Private>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="NLog" />
  </ItemGroup>
</Project>
