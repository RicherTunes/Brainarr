<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <packageSources>
    <!-- Essential sources only - avoid private feeds that cause authentication issues -->
    <add key="nuget.org" value="https://api.nuget.org/v3/index.json" />
    <!-- Public taglib source for Lidarr plugins -->
    <add key="Taglib" value="https://pkgs.dev.azure.com/Lidarr/Lidarr/_packaging/Taglib/nuget/v3/index.json" />
    <!-- Alias used by some jobs/configs -->
    <add key="lidarr-taglib" value="https://pkgs.dev.azure.com/Lidarr/Lidarr/_packaging/Taglib/nuget/v3/index.json" />
  </packageSources>

  <packageSourceCredentials>
    <!-- No credentials needed for public sources -->
  </packageSourceCredentials>

  <disabledPackageSources>
    <!-- Disable potentially problematic sources -->
  </disabledPackageSources>

  <packageSourceMapping>
    <!-- Map most packages to nuget.org -->
    <packageSource key="nuget.org">
      <package pattern="Microsoft.*" />
      <package pattern="System.*" />
      <package pattern="Newtonsoft.*" />
      <package pattern="NLog*" />
      <package pattern="FluentValidation*" />
      <package pattern="xunit*" />
      <package pattern="Moq*" />
      <package pattern="NSubstitute*" />
      <package pattern="Castle.*" />
      <package pattern="FluentAssertions*" />
      <package pattern="coverlet.*" />
      <package pattern="Bogus*" />
      <!-- Allow installing ReportGenerator global tool for coverage HTML -->
      <package pattern="dotnet-reportgenerator-globaltool" />
      <!-- Allow Stryker mutation testing tool -->
      <package pattern="dotnet-stryker" />
      <!-- ILRepack for assembly merging -->
      <package pattern="ILRepack*" />
      <!-- Azure packages for data protection -->
      <package pattern="Azure.*" />
      <!-- Standard TagLibSharp from NuGet.org (Lidarr.Plugin.Common dependency) -->
      <package pattern="TagLibSharp" />
    </packageSource>
    <!-- Map TagLib packages to Taglib source -->
    <packageSource key="Taglib">
      <!-- TagLibSharp* removed - standard TagLibSharp comes from nuget.org -->
      <package pattern="TagLibSharp-Lidarr*" />
    </packageSource>
    <packageSource key="lidarr-taglib">
      <!-- TagLibSharp* removed - standard TagLibSharp comes from nuget.org -->
      <package pattern="TagLibSharp-Lidarr*" />
    </packageSource>
  </packageSourceMapping>
</configuration>
