name: Packaging Gates

on:
  schedule:
    - cron: '30 4 * * *'  # 04:30 UTC daily â€” staggered across ecosystem (Brainarr=base)
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

concurrency:
  group: packaging-gates-${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  packaging-gates:
    uses: RicherTunes/Lidarr.Plugin.Common/.github/workflows/packaging-gates.yml@ebb8c68a8aec53e7a5cb0f6a78ac18cae65f1529
    with:
      common-path: ext/Lidarr.Plugin.Common
      plugin-csproj: Brainarr.Plugin/Brainarr.Plugin.csproj
      manifest-path: plugin.json
      host-assemblies-path: ext/Lidarr-docker/_output/net8.0
      lidarr-docker-version: pr-plugins-2.14.2.4786
